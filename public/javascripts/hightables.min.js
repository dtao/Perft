window.HighTables={};HighTables.charts={};$(document).ready(function(){Highcharts.setOptions({credits:{enabled:!!HighTables.includeHighchartsLinks}});var c={line:{engine:HighTables.LineChart},spline:{engine:HighTables.LineChart,options:{chart:{type:"spline"}}},area:{engine:HighTables.LineChart,options:{chart:{type:"area"}}},stack:{engine:HighTables.LineChart,options:{chart:{type:"area"},plotOptions:{area:{stacking:"normal"}}}},bar:{engine:HighTables.BarChart},column:{engine:HighTables.BarChart,options:{chart:{type:"column"}}},pie:{engine:HighTables.PieChart}};function e(i){var h=c[i].engine;var g=c[i].options;$("."+i+"-chart").each(function(){h.renderTo(this,g)})}function d(i){var h=c[i].engine;var g=c[i].options;$("table.render-to-"+i+"-chart").each(function(){h.renderFromTable(this,g)})}function f(){for(var g in c){e(g);d(g)}}function b(h){var j=$(h).attr("class").split(/\s+/);for(var g=0;g<j.length;++g){if(j[g].match(/^(?:line|spline|area|stack|bar|column|pie)-chart$/)){return j[g].replace(/-chart$/g,"")}}}function a(h){var j=$(h).attr("class").split(/\s+/);for(var g=0;g<j.length;++g){if(j[g].match(/^render-to-(?:line|spline|area|stack|bar|column|pie)-chart$/)){return j[g].replace(/^render-to-/g,"").replace(/-chart$/g,"")}}}HighTables.renderCharts=f;HighTables.renderChart=function(j){var i=b(j);var h=c[i].engine;var g=c[i].options;h.renderTo(j,g)};HighTables.renderChartFromTable=function(j){var i=a(chart);var h=c[i].engine;var g=c[i].options;h.renderFromTable(j,g)};f()});HighTables.Parse=function(){function b(d){var c=parseFloat(d&&d.replace(/^\$|,/g,""));return isNaN(c)?null:c}function a(e){var d=[];for(var c=0;c<e.length;++c){d.push(parseInt(e[c]))}return d}return{number:b,integers:a}}();HighTables.Base=function(b){b=$(b);var i;var g;var f;var d={options:function(j){return e(j)},title:function(j){return{title:{text:j}}},order:function(j){return{order:j}},"x-interval":function(j){return{xAxis:{tickInterval:parseInt(j)}}},"x-min":function(j){return{xAxis:{min:parseInt(j)}}},"y-interval":function(j){return{yAxis:{tickInterval:parseInt(j)}}},"y-min":function(j){return{yAxis:{min:parseInt(j)}}}};function e(k){var l=k.split(".");var j=window;while(l.length>0){j=j[l.shift()]}return(typeof j==="function")?j():j}function a(){var j={};var l;for(var k in d){l=b.attr("data-"+k);if(l){$.extend(j,d[k](l))}}return $.extend(j,{labelColumn:h(),valueColumns:c()})}function h(){return parseInt(b.attr("data-label-column"))}function c(){var j=b.attr("data-value-columns");if(j){return HighTables.Parse.integers(j.split(","))}else{return null}}this.options=function(){if(!i){i=a();i.labelColumn=this.labelColumn();i.valueColumns=this.valueColumns()}return i};this.labelColumn=function(){if(typeof g==="undefined"){g=h()}return g};this.valueColumns=function(){if(typeof f==="undefined"){f=c()}return f};this.element=b};HighTables.Table=function(d){$.extend(this,new HighTables.Base(d));var j=this.element;var g;var b;var a;var f;var h;function e(k,l){var m=k.text()||k.find("input").val();if(l){return HighTables.Parse.number(m)}else{return m}}function i(n,m,l){var k=j.find("tr:nth-child("+(n+1)+")").find("th:nth-child("+m+"), td:nth-child("+m+")");return e(k,l)}function c(l,m,k){if(m in l){return l[m]}return k}this.getCellValue=e;this.getOrCreateChart=function(){if(!g){g=$("<div>").addClass("chart");g.attr("id","chart-"+$(".chart").length+1);g.insertBefore(j)}return g};this.firstRow=function(){if(!b){b=j.find("tr:first")}return b};this.bodyRows=function(){if(!a){a=j.find("tr:gt(0)")}return a};this.columnCount=function(){if(!f){f=this.firstRow().find("td,th").length}return f};this.rowCount=function(){if(!h){h=j.find("tr").length}return h};this.getColumnHeader=function(k){return e(this.firstRow().find("td:nth-child("+(k+1)+"),th:nth-child("+(k+1)+")"))};this.getColumnData=function(l,k){k=k||{};var m=[];this.bodyRows().each(function(){var n=$(this).find("td:nth-child("+(l+1)+")");m.push(e(n,c(k,"numeric",true)))});if(k.order==="descending"){m.reverse()}return m};this.getRowHeader=function(k){return e(j.find("tr:nth-child("+(k+1)+")").find("td:first"))};this.getRowData=function(l,k){k=k||this.options()||{};var n=[];if(k.valueColumns){for(var m=0;m<k.valueColumns.length;++m){n.push(i(l,k.valueColumns[m],c(k,"numeric",true)))}}else{j.find("tr:nth-child("+(l+1)+")").find("td:gt(0):not(.exclude-from-chart),th:gt(0):not(.exclude-from-chart)").each(function(){n.push(e($(this),c(k,"numeric",true)))})}return n}};HighTables.Chart=function(a){$.extend(this,new HighTables.Base(a));var b=this.element;var c;this.getTable=function(){if(!c){c=$(b.attr("data-source"))}return c}};HighTables.LineChart=function(){var a=HighTables.charts.line=[];function d(i,h){var g=h.labelColumn||0;return i.getColumnData(0,$.extend({},h,{numeric:false}))}function b(k,g){var j=[];var l=g.valueColumns;if(l){for(var h=0;h<l.length;++h){j.push({name:k.getColumnHeader(l[h]),data:k.getColumnData(l[h],g)})}}else{for(var h=1;h<k.columnCount();h++){j.push({name:k.getColumnHeader(h),data:k.getColumnData(h,g)})}}return j}function c(k,j,h){h=h||{};var g=d(k,h);var i=b(k,h);a.push(new Highcharts.Chart($.extend(true,{chart:{backgroundColor:"transparent",renderTo:j[0],type:"line"},xAxis:{categories:g},yAxis:{title:false},title:false,series:i},h)))}function f(h,g){var i=new HighTables.Chart(h);var j=new HighTables.Table(i.getTable()[0]);return c(j,i.element,$.extend({},i.options(),g))}function e(h,g){var i=new HighTables.Table(h);return c(i,i.getOrCreateChart(),$.extend({},i.options(),g))}return{renderTo:f,renderFromTable:e}}();HighTables.BarChart=function(){var b=HighTables.charts.bar=[];function d(h,g){return h.getRowData(0,$.extend({},g,{numeric:false}))}function a(k,g){var j=[];for(var h=1;h<k.rowCount();h++){j.push({name:k.getRowHeader(h),data:k.getRowData(h,g)})}return j}function c(k,j,h){h=h||{};var g=d(k,h);var i=a(k,h);b.push(new Highcharts.Chart($.extend(true,{chart:{backgroundColor:"transparent",renderTo:j[0],type:"bar"},xAxis:{categories:g},yAxis:{title:false},title:false,series:i},h)))}function f(h,g){var i=new HighTables.Chart(h);var j=new HighTables.Table(i.getTable()[0]);return c(j,i.element,$.extend({},i.options(),g))}function e(h,g){var i=new HighTables.Table(h);return c(i,i.getOrCreateChart(),$.extend({},i.options(),g))}return{renderTo:f,renderFromTable:e}}();HighTables.PieChart=function(){var i=HighTables.charts.pie=[];function h(k){if(k.valueColumns){return"nth-child("+k.valueColumns[0]+")"}else{return"last-child"}}function b(l,k){return l.getCellValue(l.firstRow().find("th:"+h(k)))}function c(k,l){return k.getCellValue($(l).find("td:first"))}function d(l,m,k){return l.getCellValue($(m).find("td:"+h(k)),{numeric:true})}function f(m,k){var l=[];m.bodyRows().each(function(){var n=c(m,this);var o=d(m,this,k);if(n&&!isNaN(o)){l.push([n,o])}});return l}function j(m,l){var k=b(m,l);var n=f(m,l);return[{type:"pie",name:k,data:n}]}function a(n,m,k){k=k||{};var l=j(n,k);i.push(new Highcharts.Chart($.extend(true,{chart:{backgroundColor:"transparent",renderTo:m[0],type:"pie"},title:false,series:l},k)))}function g(l,k){var m=new HighTables.Chart(l);var n=new HighTables.Table(m.getTable()[0]);return a(n,m.element,$.extend({},m.options(),k))}function e(l,k){var m=new HighTables.Table(l);return a(m,m.getOrCreateChart(),$.extend({},m.options(),k))}return{renderTo:g,renderFromTable:e}}();